(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4e03"],{"/6Hm":function(t,e,n){"use strict";var a=n("ypYq");n.n(a).a},AMsw:function(t,e,n){"use strict";var a=n("nb62");n.n(a).a},ZngB:function(t,e,n){"use strict";var a=n("QbLZ"),i=n.n(a),s=n("L2JU"),r={name:"SetProcess",data:function(){return{protype:[{value:"进程",id:"2"},{value:"收款",id:"1"}]}},computed:i()({},Object(s.c)({steps:function(t){return t.state1after.steps}})),methods:{resetForm:function(t){this.$refs[t].resetFields()},removeDomain:function(t){var e=this.steps.indexOf(t);-1!==e&&this.steps.splice(e,1)},addDomain:function(){var t=this.steps.length;this.steps.splice(t-1,0,{process_name:"",key:Date.now(),price:null,content_type:"2"})}}},l=(n("AMsw"),n("KHd+")),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("el-form",{ref:"steps",staticClass:"demo-dynamic",attrs:{"label-width":"80px"}},[t._l(t.steps,function(e,a){return n("el-form-item",{key:e.key,attrs:{label:"第"+ ++a+"步"}},[n("el-input",{staticClass:"process-title-input",attrs:{disabled:1==a||a==t.steps.length,clearable:""},model:{value:e.process_name,callback:function(n){t.$set(e,"process_name",n)},expression:"domain.process_name"}}),t._v(" "),n("el-select",{staticClass:"process-type-input",attrs:{placeholder:"类型",disabled:1==a||a==t.steps.length},model:{value:e.content_type,callback:function(n){t.$set(e,"content_type",n)},expression:"domain.content_type"}},t._l(t.protype,function(t){return n("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),"1"==e.content_type?[n("el-input",{staticClass:"process-proportion-input",attrs:{prop:"price"},model:{value:e.price,callback:function(n){t.$set(e,"price",n)},expression:"domain.price"}}),t._v(" "),n("span",{staticClass:"info-yj-input-text"},[t._v("%")])]:t._e(),t._v(" "),1!=a&&a!=t.steps.length?n("i",{staticClass:"el-icon-delete el-icon",staticStyle:{cursor:"pointer"},on:{click:function(n){n.preventDefault(),t.removeDomain(e)}}}):t._e()],2)}),t._v(" "),n("el-form-item",[n("el-button",{on:{click:t.addDomain}},[t._v("新增步骤")])],1)],2)],1)},[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"theader",staticStyle:{"max-width":"800px","min-width":"790px",margin:"auto"}},[n("div",{staticStyle:{display:"inline-block","text-align":"center",width:"80px"}},[t._v("序号")]),t._v(" "),n("div",{staticStyle:{display:"inline-block","text-align":"center",width:"300px"}},[t._v("名称")]),t._v(" "),n("div",{staticStyle:{display:"inline-block","text-align":"center",width:"200px"}},[t._v("类型")]),t._v(" "),n("div",{staticStyle:{display:"inline-block","text-align":"center",width:"100px"}},[t._v("比例")]),t._v(" "),n("div",{staticStyle:{display:"inline-block","text-align":"center",width:"100px"}},[t._v("操作")])])}],!1,null,"654dfd75",null);c.options.__file="SetProcess.vue";e.a=c.exports},ZySA:function(t,e,n){"use strict";var a=n("P2sY"),i=n.n(a),s=(n("jUE0"),{bind:function(t,e){t.addEventListener("click",function(n){var a=i()({},e.value),s=i()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),r=s.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var l=r.getBoundingClientRect(),c=r.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":((c=document.createElement("span")).className="waves-ripple",c.style.height=c.style.width=Math.max(l.width,l.height)+"px",r.appendChild(c)),s.type){case"center":c.style.top=l.height/2-c.offsetHeight/2+"px",c.style.left=l.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(n.pageY-l.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(n.pageX-l.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=s.color,c.className="waves-ripple z-active",!1}},!1)}}),r=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(r)),s.install=r;e.a=s},bN1i:function(t,e,n){"use strict";n.d(e,"d",function(){return l}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return p}),n.d(e,"f",function(){return d});var a=n("Kw5r"),i=n("vDqi"),s=n.n(i),r=n("Q2AE");function l(t,e){s.a.get(t.$store.state.baseurl+"r=bk-category",{params:{page:e.page,size:e.limit}}).then(function(e){t.$store.dispatch("projectindex/getcategory",e.data)}).catch(function(t){console.log(t)})}a.default.use(s.a);var c=function(t){return s.a.get(r.a.state.baseurl+"r=bk-category",{params:{page:t.page,size:t.limit}}).then(function(t){return t.data})},o=function(t){return s.a.post(r.a.state.baseurl+"r=bk-category/createup",{title:t.title,is_open:t.is_open,is_index:t.is_index,description:t.description}).then(function(t){return t.data})},u=function(t){return s.a.post(r.a.state.baseurl+"r=bk-category/createup",{id:t.id,title:t.title,is_open:t.is_open,is_index:t.is_index,description:t.description}).then(function(t){return t.data})},p=function(t){return s.a.get(r.a.state.baseurl+"r=bk-category/del",{params:{id:t}}).then(function(t){return t.data})},d=function(t){return s.a.get(r.a.state.baseurl+"r=bk-category/one",{params:{id:t}}).then(function(t){return t.data})}},jUE0:function(t,e,n){},nAcF:function(t,e,n){"use strict";n.r(e);var a=n("QbLZ"),i=n.n(a),s=n("L2JU"),r=n("ZngB"),l=n("ZySA"),c=n("xAc7"),o=n("bN1i"),u={name:"ComplexTable",directives:{waves:l.a},components:{SetProcess:r.a},filters:{statusFilter:function(t){return{true:"success",false:"danger"}[t]},timeFilter:function(t){return""===t||null==t?"--/--":t},pageFilters:function(t){return parseInt(t)}},data:function(){return{listLoading:!0,listQuery:{page:1,limit:10,name:void 0,type:void 0}}},computed:i()({},Object(s.c)({list:function(t){return t.state1after.list},page:function(t){return t.state1after.page},processTypeOptions:function(t){return t.projectindex.list}})),created:function(){this.getList(),this.getCategory()},methods:{getList:function(){var t=this;Object(c.a)(this.listQuery).then(function(e){t.$store.dispatch("state1after/getstate1contract1",e)})},getCategory:function(){Object(o.d)(this,this.listQuery)},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()}}},p=(n("/6Hm"),n("KHd+")),d=Object(p.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container",staticStyle:{background:"#ffffff",padding:"16px"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"联系人"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleFilter(e):null}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"项目分类"},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.processTypeOptions,function(t){return n("el-option",{key:t.title,attrs:{label:t.title,value:t.id}})})),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),t._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark",border:""}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"60",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"task_number",label:"业务编号",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"业务名称",align:"center","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-row",[n("el-col",{staticClass:"ywitem-l",attrs:{span:6}},[n("div",{},[n("img",{staticClass:"ywitem-l-img",attrs:{src:e.row.img_path,alt:""}})])]),t._v(" "),n("el-col",{staticClass:"ywitem-r",attrs:{span:18}},[n("div",{},[n("div",{staticClass:"ywitem-r-title"},[t._v(t._s(e.row.taskname))]),t._v(" "),n("div",t._l(e.row.tags,function(e){return n("el-tag",{key:e.key,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"mini"}},[t._v(t._s(e))])}))])])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"username",label:"业务联系人",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"userphone",label:"联系方式",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"time",label:"提交时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.time)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"expect_commission",label:"预计佣金",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{color:"red"}},[t._v("￥"+t._s(e.row.min_price)+"--"+t._s(e.row.max_price))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"经纪人",width:"100",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"state",label:"进度",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{path:"/business/stateToload",query:{id:e.row.id}}}},[""==e.row.contract_id?n("el-tag",[t._v("待上传合同")]):""!=e.row.contract_id&&"0"==e.row.total_price?n("el-tag",[t._v("待设置签约金额")]):""!=e.row.contract_id&&"0"!=e.row.total_price&&"0"===e.row.setprocess?n("el-tag",[t._v("待设置流程")]):n("el-tag",{attrs:{type:"success"}},[t._v("设置完成")])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"120","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上传合同",placement:"top"}},[n("router-link",{attrs:{to:{path:"/business/stateToload",query:{id:t.row.id}}}},[n("i",{staticClass:"el-icon-upload2 el-icon"})])],1)]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container",staticStyle:{background:"white","margin-top":"0","text-align":"right",padding:"16px"}},[n("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t._f("pageFilters")(t.page.data_total),background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},[],!1,null,"695fdd6c",null);d.options.__file="state1after.vue";e.default=d.exports},nb62:function(t,e,n){},xAc7:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return u});var a=n("Kw5r"),i=n("vDqi"),s=n.n(i),r=n("Q2AE");a.default.use(s.a);var l=function(t){return s.a.get(r.a.state.baseurl+"r=bk-task",{params:{page:t.page,size:t.limit,name:t.title,category_id:t.type,check:2,state:4,stop:0}}).then(function(t){return t.data})},c=function(t){return s.a.get(r.a.state.baseurl+"r=bk-check/task-detail",{params:{id:t}}).then(function(t){return t.data})},o=function(t,e,n){return s.a.get(r.a.state.baseurl+"r=bk-check/contract",{params:{id:t,total_price:e,contract_id:n}}).then(function(t){return t.data})},u=function(t,e){return s.a.post(r.a.state.baseurl+"r=bk-task/addprocess",{id:t,process:e}).then(function(t){return t.data})}},ypYq:function(t,e,n){}}]);