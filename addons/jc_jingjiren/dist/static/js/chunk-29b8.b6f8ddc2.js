(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-29b8"],{G1E7:function(t,e,i){},H5L3:function(t,e,i){"use strict";var a=i("G1E7");i.n(a).a},IVzC:function(t,e,i){"use strict";var a=i("O1J0");i.n(a).a},"KO+S":function(t,e,i){},O1J0:function(t,e,i){},PdMC:function(t,e,i){"use strict";var a=i("gJYG");i.n(a).a},VR8p:function(t,e,i){"use strict";var a=i("i5cc");i.n(a).a},VhVU:function(t,e,i){"use strict";i.r(e);var a=i("QbLZ"),n=i.n(a),s=i("L2JU"),l={name:"SetProcess",data:function(){return{}},computed:n()({},Object(s.c)({dynamicValidateForm:function(t){return t.projectlist.post}})),methods:{removeDomain:function(t){var e=this.dynamicValidateForm.process.indexOf(t);-1!==e&&this.dynamicValidateForm.process.splice(e,1)},addDomain:function(){var t=this.dynamicValidateForm.process.length;this.dynamicValidateForm.process.splice(t-1,0,{key:Date.now(),process_name:"",order:""})}}},o=(i("IVzC"),i("KHd+")),r=Object(o.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),i("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:t.dynamicValidateForm,"label-width":"80px"}},[t._l(t.dynamicValidateForm.process,function(e,a){return i("el-form-item",{key:e.id},[i("span",{staticClass:"serialnumber"},[t._v(t._s(++a))]),t._v(" "),i("el-input",{staticClass:"process-input",attrs:{readonly:1==a||a==t.dynamicValidateForm.process.length},model:{value:e.process_name,callback:function(i){t.$set(e,"process_name",i)},expression:"domain.process_name"}}),t._v(" "),1!=a&&a!=t.dynamicValidateForm.process.length?i("i",{staticClass:"el-icon-delete el-icon",on:{click:function(i){i.preventDefault(),t.removeDomain(e)}}}):t._e()],1)}),t._v(" "),i("el-form-item",[i("el-button",{on:{click:t.addDomain}},[t._v("新增步骤")])],1)],2)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tab-title"},[e("div",{staticClass:"tab-title-item tab-title-item-left"},[this._v("序号")]),this._v(" "),e("div",{staticClass:"tab-title-item tab-title-item-right"},[this._v("名称")])])}],!1,null,"6fa19d3e",null);r.options.__file="SetProcess.vue";var c=r.exports,u={name:"SetProcess",data:function(){return{limit:2,accepttype:".jpg,.png,.jpeg",showfile:!0,uploadListimg:""}},computed:n()({filelist:function(){var t=[];return t.push({id:this.$store.state.projectlist.post.img,name:"",url:this.$store.state.projectlist.post.img_path}),t}},Object(s.c)({imgurl:function(t){return t.projectlist.post.img_path},img:function(t){return t.projectlist.post.img},baseurl:function(t){return t.baseurl+"r=base/addimg"}})),created:function(){this.init()},methods:{init:function(){},handleRemove:function(t,e){for(var i=[],a=0;a<e.length;a++)e[a].response?i.push(e[a].response.id):i.push(e[a].id);this.uploadDetail=i.join(","),this.$store.dispatch("projectlist/setlistid",this.uploadDetail)},handlePreview:function(t){console.log(t)},handleoverlimit:function(){this.$message({message:"文件数量超出限制，最多上传1张图片",type:"warning"})},handleUploadSucess:function(t,e,i){this.$message({message:"上传成功",type:"success"}),this.uploadListimg=t.id,this.$store.dispatch("projectlist/setlistid",this.uploadListimg),this.$store.dispatch("projectlist/setlistimg",e)},handledefeat:function(t,e,i){this.$message({message:"上传失败",type:"warning"})},handleChange:function(t,e){}}},d=(i("j0ST"),Object(o.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{staticClass:"upload-demo",attrs:{limit:t.limit,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleUploadSucess,accept:t.accepttype,"on-exceed":t.handleoverlimit,"on-error":t.handledefeat,"file-list":t.filelist,"on-change":t.handleChange,action:t.baseurl,"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("(注：只能上传jpg/png文件，且不超过500kb，推荐尺寸140*96)")])],1)],1)},[],!1,null,"3f371678",null));d.options.__file="UploadListimg.vue";var p=d.exports,m=i("s1T2"),f=i("glbJ"),h=i("ZySA"),g=i("q2t4"),v=i("bN1i"),b={name:"ComplexTable",directives:{waves:h.a},filters:{statusFilter:function(t){return["danger","success"][t]},pageFilters:function(t){return parseInt(t)}},components:{SetProcess:c,UploadListimg:p,UploadBanner:m.a,Tinymce:f.a},data:function(){return{listLoading:!1,listQuery:{page:1,limit:10,title:null,type:null},multipleSelection:null,statusShowIndex:["展示","隐藏"],dialogFormVisible:!1,selectitem:null,activeName:"first",inputVisible:!1,inputValue:""}},computed:n()({filelist:function(){for(var t=this.$store.state.projectlist.post.slide_path,e=[],i=0;i<t.length;i++)e.push({name:t[i].name,url:t[i].path,id:t[i].id});return e}},Object(s.c)({list:function(t){return t.projectlist.list},page:function(t){return t.projectlist.page},processTypeOptions:function(t){return t.projectindex.list},formDataProject:function(t){return t.projectlist.post},img:function(t){return t.projectlist.post.slide}})),created:function(){this.getList(),this.getCategory()},methods:{getList:function(){var t=this;Object(g.c)(this.listQuery).then(function(e){t.$store.dispatch("projectlist/getproject",e)})},getCategory:function(){Object(v.d)(this,this.listQuery)},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleUpdate:function(t){var e=this;Object(g.d)(t.id).then(function(t){e.$store.dispatch("projectlist/oneproject",t)}),this.dialogFormVisible=!0},detailFormUpdata:function(){var t=this;this.$confirm("确认提交修改内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(g.a)(t.formDataProject).then(function(e){"success"===e.status.state&&(t.getList(),t.$message({type:"success",message:"修改成功!"}))}),t.dialogFormVisible=!1}).catch(function(){})},handleDelete:function(t){var e=this;this.$confirm("此操作将删除该项目相关信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(g.b)(t.id).then(function(t){"success"===t.status.state?(e.getList(),e.$message({type:"success",message:"删除成功!"})):"task"===t.status.state&&e.$message({type:"error",message:"选择的项目下未完成业务！不能删除！"})})}).catch(function(){})},handleSelectionChange:function(t){this.multipleSelection=t},handleBatchDelete:function(){for(var t=this,e=this.multipleSelection,i=[],a=0;a<e.length;a++)i.push(e[a].id);this.$confirm("此操作将删除所选项目相关信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(g.b)(i.join(",")).then(function(e){"success"===e.status.state?(t.getList(),t.$message({type:"success",message:"删除成功!"})):"task"===e.status.state&&t.$message({type:"error",message:"选择的项目下还有业务！不能删除！"})})}).catch(function(){})},handleClose:function(t){this.formDataProject.tags.splice(this.formDataProject.tags.indexOf(t),1)},showInput:function(){var t=this;if(this.formDataProject.tags.length>5)return this.$message({type:"warning",message:"最多添加5个标签"}),!1;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&this.formDataProject.tags.push(t),this.inputVisible=!1,this.inputValue=""},childupload:function(t){this.$store.dispatch("projectlist/setbannerid",t)}}},_=(i("VR8p"),Object(o.a)(b,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container",staticStyle:{padding:"20px"}},[i("div",{staticClass:"filter-container",staticStyle:{background:"#ffffff",padding:"16px","text-align":"right"}},[i("router-link",{attrs:{to:"/project/add"}},[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-plus"}},[t._v("添加新项目\n      ")])],1),t._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"项目名称"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleFilter(e):null}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"项目分类"},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.processTypeOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索\n    ")]),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.handleBatchDelete}},[t._v("批量删除\n    ")])],1),t._v(" "),i("el-table",{ref:"multipleTable",attrs:{data:t.list,"tooltip-effect":"dark",border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"order",label:"排序",width:"60",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"项目名称",align:"center","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-row",[i("el-col",{staticClass:"ywitem-l",attrs:{span:6}},[i("div",{},[i("img",{staticClass:"ywitem-l-img",attrs:{src:e.row.img_path,alt:""}})])]),t._v(" "),i("el-col",{staticClass:"ywitem-r",attrs:{span:18}},[i("div",{},[i("div",{staticClass:"ywitem-r-title"},[t._v(t._s(e.row.name))]),t._v(" "),i("div",t._l(e.row.tags,function(e){return i("el-tag",{key:e.key,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"mini"}},[t._v(t._s(e)+"\n                ")])}))])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"category",label:"项目分类",width:"120",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"提交时间",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.time)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"proportion",label:"项目佣金比例",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.vt_price_percent)+"%\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"commission",label:"预计佣金",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{color:"#F56C6C"}},[t._v("￥"+t._s(e.row.min_price)+"-￥"+t._s(e.row.max_price))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"state",label:"状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t._f("statusFilter")(e.row.is_open)}},[t._v(t._s("1"==e.row.is_open?"启用":"禁用"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"180","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-edit el-icon",on:{click:function(i){t.handleUpdate(e.row)}}}),t._v(" "),i("i",{staticClass:"el-icon-delete el-icon",on:{click:function(i){t.handleDelete(e.row)}}})]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container",staticStyle:{background:"white","margin-top":"0","text-align":"right",padding:"16px"}},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t._f("pageFilters")(t.page.data_total),background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"项目修改",width:"1000px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-tabs",{staticClass:"tab-scroll",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticClass:"el-tab-pane",attrs:{label:"基本信息",name:"first"}},[i("keep-alive",[i("el-row",{staticStyle:{"padding-top":"20px","margin-bottom":"0px"},attrs:{gutter:3}},[i("el-col",{staticClass:"grid-content-wrapper",attrs:{span:24}},[i("div",{staticClass:"grid-content grid-content-r"},[i("el-form",{attrs:{model:t.formDataProject,"label-position":"right","label-width":"140px"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:t.formDataProject.name,callback:function(e){t.$set(t.formDataProject,"name",e)},expression:"formDataProject.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"项目副标题"}},[i("el-input",{attrs:{placeholder:"请输入项目副标题"},model:{value:t.formDataProject.subname,callback:function(e){t.$set(t.formDataProject,"subname",e)},expression:"formDataProject.subname"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"项目分类"}},[i("el-select",{attrs:{placeholder:"请选择项目分类"},model:{value:t.formDataProject.category_id,callback:function(e){t.$set(t.formDataProject,"category_id",e)},expression:"formDataProject.category_id"}},t._l(t.processTypeOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"项目标签"}},[t._l(t.formDataProject.tags,function(e){return i("el-tag",{key:e,attrs:{"disable-transitions":!1,closable:""},on:{close:function(i){t.handleClose(e)}}},[t._v("\n                      "+t._s(e)+"\n                    ")])}),t._v(" "),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+添加标签")])],2),t._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{attrs:{placeholder:"请选择项目启用状态"},model:{value:t.formDataProject.is_open,callback:function(e){t.$set(t.formDataProject,"is_open",e)},expression:"formDataProject.is_open"}},[i("el-option",{key:"state1",attrs:{label:"启用",value:"1"}}),t._v(" "),i("el-option",{key:"state0",attrs:{label:"禁用",value:"0"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"排序"}},[i("el-input",{attrs:{placeholder:"设置显示顺序，输入数值，值越大显示越靠前"},model:{value:t.formDataProject.order,callback:function(e){t.$set(t.formDataProject,"order",e)},expression:"formDataProject.order"}})],1)],1)],1)]),t._v(" "),i("el-col",{staticClass:"grid-content-wrapper",attrs:{span:24}},[i("div",{staticClass:"grid-content grid-content-r"},[i("el-form",{attrs:{model:t.formDataProject,"label-position":"right","label-width":"140px"}},[i("el-form-item",{attrs:{label:"佣金比例"}},[i("el-input",{staticClass:"info-yj-input",attrs:{placeholder:"输入数字"},model:{value:t.formDataProject.vt_price_percent,callback:function(e){t.$set(t.formDataProject,"vt_price_percent",e)},expression:"formDataProject.vt_price_percent"}}),t._v(" "),i("span",{staticClass:"info-yj-input-text"},[t._v("%")])],1),t._v(" "),i("el-form-item",{attrs:{label:"预计佣金"}},[i("el-input",{staticClass:"info-yj-input",attrs:{placeholder:"输入数字"},model:{value:t.formDataProject.min_price,callback:function(e){t.$set(t.formDataProject,"min_price",e)},expression:"formDataProject.min_price"}}),t._v(" "),i("span",{staticClass:"info-yj-input-text"},[t._v("---")]),t._v(" "),i("el-input",{staticClass:"info-yj-input",attrs:{placeholder:"输入数字"},model:{value:t.formDataProject.max_price,callback:function(e){t.$set(t.formDataProject,"max_price",e)},expression:"formDataProject.max_price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"已发放金额(虚拟)"}},[i("el-input",{staticClass:"info-yj-input",attrs:{placeholder:"输入数字"},model:{value:t.formDataProject.vt_price_already,callback:function(e){t.$set(t.formDataProject,"vt_price_already",e)},expression:"formDataProject.vt_price_already"}}),t._v(" "),i("span",{staticClass:"info-yj-input-text"},[t._v("元")])],1),t._v(" "),i("el-form-item",{attrs:{label:"已成交业务(虚拟)"}},[i("el-input",{staticClass:"info-yj-input",attrs:{placeholder:"输入数字"},model:{value:t.formDataProject.vt_price_total,callback:function(e){t.$set(t.formDataProject,"vt_price_total",e)},expression:"formDataProject.vt_price_total"}}),t._v(" "),i("span",{staticClass:"info-yj-input-text"},[t._v("单")])],1),t._v(" "),i("el-form-item",{attrs:{label:"已申请人数(虚拟)"}},[i("el-input",{staticClass:"info-yj-input",attrs:{placeholder:"输入数字"},model:{value:t.formDataProject.vt_project_count,callback:function(e){t.$set(t.formDataProject,"vt_project_count",e)},expression:"formDataProject.vt_project_count"}}),t._v(" "),i("span",{staticClass:"info-yj-input-text"},[t._v("人")])],1),t._v(" "),i("el-form-item",{attrs:{label:"项目缩略图"}},[i("upload-listimg")],1)],1)],1)])],1)],1)],1),t._v(" "),i("el-tab-pane",{staticClass:"el-tab-pane",attrs:{label:"项目详情",name:"second"}},[i("keep-alive",[i("el-row",{staticStyle:{"padding-top":"20px","margin-bottom":"0px"},attrs:{gutter:3}},[i("el-col",{staticClass:"grid-content-wrapper",attrs:{span:24}},[i("div",{staticClass:"grid-content grid-content-r grid-content-xm"},[i("h6",{staticClass:"uploadimg-h6"},[t._v("1.添加项目详情简介")]),t._v(" "),t.dialogFormVisible?i("div",[i("tinymce",{attrs:{height:360},model:{value:t.formDataProject.description,callback:function(e){t.$set(t.formDataProject,"description",e)},expression:"formDataProject.description"}})],1):t._e(),t._v(" "),i("h6",{staticClass:"uploadimg-h6"},[t._v("2.上传项目图片(轮播展示用,最多上传5张,推荐尺寸375*165)")]),t._v(" "),i("upload-banner",{attrs:{filelist:t.filelist,imgid:t.img,proptitle:"修改项目轮播图",size:"375*165"},on:{childupload:t.childupload}})],1)])],1)],1)],1),t._v(" "),i("el-tab-pane",{staticClass:"el-tab-pane",attrs:{label:"流程设置",name:"third"}},[i("keep-alive",[i("el-row",{staticStyle:{"padding-top":"20px","margin-bottom":"0px"},attrs:{gutter:3}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content grid-content-r grid-content-xm"},[i("set-process")],1)])],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.detailFormUpdata}},[t._v("提 交")])],1)],1)],1)},[],!1,null,"7d340c5f",null));_.options.__file="manage.vue";e.default=_.exports},ZySA:function(t,e,i){"use strict";var a=i("P2sY"),n=i.n(a),s=(i("jUE0"),{bind:function(t,e){t.addEventListener("click",function(i){var a=n()({},e.value),s=n()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),l=s.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var o=l.getBoundingClientRect(),r=l.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":((r=document.createElement("span")).className="waves-ripple",r.style.height=r.style.width=Math.max(o.width,o.height)+"px",l.appendChild(r)),s.type){case"center":r.style.top=o.height/2-r.offsetHeight/2+"px",r.style.left=o.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(i.pageY-o.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(i.pageX-o.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=s.color,r.className="waves-ripple z-active",!1}},!1)}}),l=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(l)),s.install=l;e.a=s},bN1i:function(t,e,i){"use strict";i.d(e,"d",function(){return o}),i.d(e,"e",function(){return r}),i.d(e,"a",function(){return c}),i.d(e,"c",function(){return u}),i.d(e,"b",function(){return d}),i.d(e,"f",function(){return p});var a=i("Kw5r"),n=i("vDqi"),s=i.n(n),l=i("Q2AE");function o(t,e){s.a.get(t.$store.state.baseurl+"r=bk-category",{params:{page:e.page,size:e.limit}}).then(function(e){t.$store.dispatch("projectindex/getcategory",e.data)}).catch(function(t){console.log(t)})}a.default.use(s.a);var r=function(t){return s.a.get(l.a.state.baseurl+"r=bk-category",{params:{page:t.page,size:t.limit}}).then(function(t){return t.data})},c=function(t){return s.a.post(l.a.state.baseurl+"r=bk-category/createup",{title:t.title,is_open:t.is_open,is_index:t.is_index,description:t.description}).then(function(t){return t.data})},u=function(t){return s.a.post(l.a.state.baseurl+"r=bk-category/createup",{id:t.id,title:t.title,is_open:t.is_open,is_index:t.is_index,description:t.description}).then(function(t){return t.data})},d=function(t){return s.a.get(l.a.state.baseurl+"r=bk-category/del",{params:{id:t}}).then(function(t){return t.data})},p=function(t){return s.a.get(l.a.state.baseurl+"r=bk-category/one",{params:{id:t}}).then(function(t){return t.data})}},eggG:function(t,e,i){"use strict";var a=i("KO+S");i.n(a).a},gJYG:function(t,e,i){},glbJ:function(t,e,i){"use strict";var a=i("4d7F"),n=i.n(a),s=i("GQeE"),l=i.n(s),o=i("QbLZ"),r=i.n(o),c=i("L2JU"),u={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},computed:r()({},Object(c.c)({baseurl:function(t){return t.baseurl+"r=base/addpic"}})),methods:{checkAllSuccess:function(){var t=this;return console.log("checkAllSuccess"),l()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=l()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功")},handleSuccess:function(t,e){for(var i=e.uid,a=l()(this.listObj),n=0,s=a.length;n<s;n++)if(this.listObj[a[n]].uid===i)return this.listObj[a[n]].url=t.url,void(this.listObj[a[n]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=l()(this.listObj),a=0,n=i.length;a<n;a++)if(this.listObj[i[a]].uid===e)return void delete this.listObj[i[a]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,a=t.uid;return this.listObj[a]={},new n.a(function(n,s){var l=new Image;l.src=i.createObjectURL(t),l.onload=function(){e.listObj[a]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},n(!0)})}}},d=(i("eggG"),i("KHd+")),p=Object(d.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,modal:!1,"custom-class":"uploadwrapper"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,action:t.baseurl,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,"list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("(温馨提示：为适应小程序端，建议在编辑器中设置图片宽度最大为375)")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"651e5034",null);p.options.__file="editorImage.vue";var m=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],f=["bold italic underline strikethrough alignleft aligncenter alignright fontsizeselect undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],h={name:"Tinymce",components:{editorImage:p.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:300}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:"zh_CN",selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:f,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",convert_urls:!1,link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},g=(i("PdMC"),Object(d.a)(h,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"dcf34926",null));g.options.__file="index.vue";e.a=g.exports},i5cc:function(t,e,i){},j0ST:function(t,e,i){"use strict";var a=i("l25s");i.n(a).a},jUE0:function(t,e,i){},l25s:function(t,e,i){},q2t4:function(t,e,i){"use strict";i.d(e,"c",function(){return o}),i.d(e,"a",function(){return r}),i.d(e,"b",function(){return c}),i.d(e,"d",function(){return u});var a=i("Kw5r"),n=i("vDqi"),s=i.n(n),l=i("Q2AE");a.default.use(s.a);var o=function(t){return s.a.get(l.a.state.baseurl+"r=bk-project",{params:{page:t.page,size:t.limit,category:t.type,name:t.title}}).then(function(t){return t.data})},r=function(t){return s.a.post(l.a.state.baseurl+"r=bk-project/createup",{data:t}).then(function(t){return t.data})},c=function(t){return s.a.get(l.a.state.baseurl+"r=bk-project/delall",{params:{id:t}}).then(function(t){return t.data})},u=function(t){return s.a.get(l.a.state.baseurl+"r=bk-project/one",{params:{id:t}}).then(function(t){return t.data})}},s1T2:function(t,e,i){"use strict";var a=i("QbLZ"),n=i.n(a),s=i("L2JU"),l={props:{proptitle:{type:String,default:""},size:{type:String,default:""},filelist:{type:Array,default:[]},imgid:{type:String,default:""}},data:function(){return{limit:5,dialogImageUrl:"",dialogVisible:!1,multiple:!0,uploadDetail:""}},computed:n()({},Object(s.c)({baseurl:function(t){return t.baseurl+"r=base/addimg"}})),created:function(){},methods:{handleRemove:function(t,e){for(var i=[],a=0;a<e.length;a++)e[a].response?i.push(e[a].response.id):i.push(e[a].id);this.uploadDetail=i.join(","),this.$emit("childupload",this.uploadDetail)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleoverlimit:function(){this.$message({message:"文件数量超出限制，最多上传5张图片",type:"warning"})},handleSuccess:function(t,e,i){this.$message({message:"上传成功",type:"success"}),this.uploadDetail=this.imgid,""===this.uploadDetail?this.uploadDetail=t.id:this.uploadDetail=this.uploadDetail+","+t.id,this.$emit("childupload",this.uploadDetail)},handledefeat:function(t,e,i){this.$message({message:"上传失败",type:"warning"})}}},o=(i("H5L3"),i("KHd+")),r=Object(o.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"banner"},[i("el-upload",{attrs:{limit:t.limit,multiple:t.multiple,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-exceed":t.handleoverlimit,"on-success":t.handleSuccess,"on-error":t.handledefeat,"file-list":t.filelist,action:t.baseurl,"list-type":"picture-card"}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{src:t.dialogImageUrl,width:"100%",alt:""}})])],1)},[],!1,null,"38793e1e",null);r.options.__file="UploadBanner.vue";e.a=r.exports}}]);