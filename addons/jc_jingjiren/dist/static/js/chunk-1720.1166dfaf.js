(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1720"],{"KO+S":function(t,e,i){},PdMC:function(t,e,i){"use strict";var n=i("gJYG");i.n(n).a},VT5W:function(t,e,i){},ZySA:function(t,e,i){"use strict";var n=i("P2sY"),s=i.n(n),a=(i("jUE0"),{bind:function(t,e){t.addEventListener("click",function(i){var n=s()({},e.value),a=s()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),l=a.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var o=l.getBoundingClientRect(),r=l.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":((r=document.createElement("span")).className="waves-ripple",r.style.height=r.style.width=Math.max(o.width,o.height)+"px",l.appendChild(r)),a.type){case"center":r.style.top=o.height/2-r.offsetHeight/2+"px",r.style.left=o.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(i.pageY-o.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(i.pageX-o.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=a.color,r.className="waves-ripple z-active",!1}},!1)}}),l=function(t){t.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(l)),a.install=l;e.a=a},eggG:function(t,e,i){"use strict";var n=i("KO+S");i.n(n).a},fbuD:function(t,e,i){},gJYG:function(t,e,i){},glbJ:function(t,e,i){"use strict";var n=i("4d7F"),s=i.n(n),a=i("GQeE"),l=i.n(a),o=i("QbLZ"),r=i.n(o),c=i("L2JU"),u={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},computed:r()({},Object(c.c)({baseurl:function(t){return t.baseurl+"r=base/addpic"}})),methods:{checkAllSuccess:function(){var t=this;return console.log("checkAllSuccess"),l()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=l()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功")},handleSuccess:function(t,e){for(var i=e.uid,n=l()(this.listObj),s=0,a=n.length;s<a;s++)if(this.listObj[n[s]].uid===i)return this.listObj[n[s]].url=t.url,void(this.listObj[n[s]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=l()(this.listObj),n=0,s=i.length;n<s;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new s.a(function(s,a){var l=new Image;l.src=i.createObjectURL(t),l.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},s(!0)})}}},d=(i("eggG"),i("KHd+")),p=Object(d.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,modal:!1,"custom-class":"uploadwrapper"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,action:t.baseurl,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,"list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("(温馨提示：为适应小程序端，建议在编辑器中设置图片宽度最大为375)")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"651e5034",null);p.options.__file="editorImage.vue";var h=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=["bold italic underline strikethrough alignleft aligncenter alignright fontsizeselect undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],f={name:"Tinymce",components:{editorImage:p.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:300}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:"zh_CN",selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:m,menubar:this.menubar,plugins:h,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",convert_urls:!1,link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},g=(i("PdMC"),Object(d.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"dcf34926",null));g.options.__file="index.vue";e.a=g.exports},jUE0:function(t,e,i){},kV41:function(t,e,i){"use strict";var n=i("VT5W");i.n(n).a},q4h8:function(t,e,i){"use strict";var n=i("fbuD");i.n(n).a},rr1a:function(t,e,i){"use strict";var n=i("QbLZ"),s=i.n(n),a=i("L2JU"),l={name:"SetProcess",props:{proptitle:{type:String,default:""},size:{type:String,default:""},filelist:{type:Array,default:[]}},data:function(){return{accepttype:".jpg,.png,.jpeg"}},computed:s()({},Object(a.c)({baseurl:function(t){return t.baseurl+"r=base/addimg"}})),created:function(){},methods:{handleRemove:function(t,e){console.log(t);for(var i=[],n=0;n<e.length;n++)e[n].response?i.push(e[n].response.id):i.push(e[n].id);this.$emit("childupload",{file:{},imgid:""})},handlePreview:function(t){console.log(t)},handleoverlimit:function(){this.$message({message:"文件数量超出限制，最多上传1张图片",type:"warning"})},handleUploadSucess:function(t,e,i){this.$message({message:"上传成功",type:"success"}),this.$emit("childupload",{file:e,imgid:t.id})},handledefeat:function(t,e,i){this.$message({message:"上传失败",type:"warning"})},handleChange:function(t,e){}}},o=(i("q4h8"),i("KHd+")),r=Object(o.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{staticClass:"upload-demo",attrs:{limit:2,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleUploadSucess,accept:t.accepttype,"on-exceed":t.handleoverlimit,"on-error":t.handledefeat,"on-change":t.handleChange,"file-list":t.filelist,action:t.baseurl,"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("(注：只能上传jpg/png文件，推荐大小 "+t._s(t.size)+" )")])],1)],1)},[],!1,null,"3a16ad55",null);r.options.__file="UploadListimg.vue";e.a=r.exports},sXeP:function(t,e,i){"use strict";i.r(e);var n=i("ZySA"),s=i("rr1a"),a=i("glbJ"),l=(i("L2JU"),i("Kw5r")),o=i("vDqi"),r=i.n(o),c=i("Q2AE");l.default.use(r.a);var u={name:"ComplexTable",directives:{waves:n.a},components:{UploadListimg:s.a,tinymce:a.a},filters:{statusFilter:function(t){return["danger","success"][t]},typeFilter:function(t){return t},pageFilters:function(t){return parseInt(t)}},data:function(){return{listLoading:!1,listQuery:{page:1,limit:10,title:void 0},statusOptions:["启用","禁用"],statusShowIndex:["展示","隐藏"],dialogFormVisible:!1,dialogStatus:"",textMap:{update:"修改公告",create:"创建新公告"},list:[],page:{},temp:{id:"",uniacid:"",title:"",img:"",content:"",look:"",is_open:"",imgurl:[],time:""}}},computed:{filelist:function(){var t=this.temp.imgurl,e=this.temp.img,i=[];return e?(i.push({id:e,name:"",url:t[0]}),i):[]}},created:function(){this.getList()},activated:function(){this.getList()},methods:{getList:function(){var t=this;(function(t){return r.a.get(c.a.state.baseurl+"r=bk-notice",{params:{page:t.page,size:t.limit,title:t.title}}).then(function(t){return t.data})})(this,this.listQuery).then(function(e){t.list=e.list,t.page=e.page})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleCreate:function(){this.temp={id:"",uniacid:"",title:"",img:"",content:"",look:"",is_open:"",imgurl:[],time:""},this.dialogStatus="create",this.dialogFormVisible=!0},handlecreateData:function(){var t=this;(function(t){return r.a.post(c.a.state.baseurl+"r=bk-notice/create",{title:t.title,img:t.img,content:t.content,look:t.look,is_open:t.is_open}).then(function(t){return t.data})})(this.temp).then(function(e){"success"===e.status.state&&(t.getList(),t.$message({type:"success",message:"添加成功!"}))}),this.dialogFormVisible=!1},handleUpdate:function(t){this.temp=t,this.dialogStatus="update",this.dialogFormVisible=!0},handleupdateData:function(t){var e=this;(function(t){return r.a.post(c.a.state.baseurl+"r=bk-notice/edit",{id:t.id,title:t.title,img:t.img,content:t.content,look:t.look,is_open:t.is_open}).then(function(t){return t.data})})(this.temp).then(function(t){"success"===t.status.state&&(e.getList(),e.$message({type:"success",message:"修改成功!"}))}),this.dialogFormVisible=!1},handleDelete:function(t){var e=this;this.$confirm("此操作将删除该公告相关信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return r.a.get(c.a.state.baseurl+"r=bk-notice/del",{params:{id:t}}).then(function(t){return t.data})})(t.id).then(function(t){"success"===t.status.state&&(e.getList(),e.$message({type:"success",message:"删除成功!"}))})}).catch(function(){})},childupload:function(t){this.temp.img=t.imgid,this.temp.imgurl[0]=t.file.url}}},d=(i("kV41"),i("KHd+")),p=Object(d.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"标题"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleFilter(e):null}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px",float:"left"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v("新建公告")])],1),t._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","min-height":"300px"},attrs:{data:t.list,border:"",fit:""}},[i("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"65"}}),t._v(" "),i("el-table-column",{attrs:{width:"180px",prop:"time",align:"center",label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.time)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"150px",align:"center",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type",on:{click:function(i){t.handleUpdate(e.row)}}},[t._v("【"+t._s(e.row.title)+"】")])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"阅读数",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.look?i("span",[t._v(t._s(e.row.look))]):i("span",[t._v("0")])]}}])}),t._v(" "),i("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t._f("statusFilter")(e.row.is_open)}},[t._v(t._s("1"===e.row.is_open?"显示":"隐藏"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"200","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-edit el-icon",on:{click:function(i){t.handleUpdate(e.row)}}}),t._v(" "),i("i",{staticClass:"el-icon-delete el-icon",on:{click:function(i){t.handleDelete(e.row)}}})]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container",staticStyle:{background:"white","margin-top":"0","text-align":"right",padding:"16px"}},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t._f("pageFilters")(t.page.data_total),background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"1000px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{staticStyle:{"min-width":"400px","max-width":"800px","margin-left":"50px"},attrs:{model:t.temp,"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"公告标题"},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"展示状态"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"是否展示"},model:{value:t.temp.is_open,callback:function(e){t.$set(t.temp,"is_open",e)},expression:"temp.is_open"}},t._l(t.statusOptions,function(t){return i("el-option",{key:t,attrs:{label:t,value:"启用"===t?"1":"0"}})}))],1),t._v(" "),i("el-form-item",{staticStyle:{width:"270px"},attrs:{label:"阅读次数"}},[i("el-input",{attrs:{placeholder:"阅读次数(虚拟)"},model:{value:t.temp.look,callback:function(e){t.$set(t.temp,"look",e)},expression:"temp.look"}})],1),t._v(" "),t.dialogFormVisible?i("el-form-item",{attrs:{label:"公告详情"}},[i("tinymce",{ref:"tinymce",attrs:{height:360},model:{value:t.temp.content,callback:function(e){t.$set(t.temp,"content",e)},expression:"temp.content"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"缩略图",prop:"description"}},[i("upload-listimg",{attrs:{filelist:t.filelist,proptitle:"公告缩略图",size:"118*70"},on:{childupload:t.childupload}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.handlecreateData}},[t._v("添加")]):i("el-button",{attrs:{type:"primary"},on:{click:t.handleupdateData}},[t._v("修改")])],1)],1)],1)},[],!1,null,"be59b33e",null);p.options.__file="index.vue";e.default=p.exports}}]);